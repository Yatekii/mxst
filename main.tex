\documentclass[10pt,landscape]{article}
\usepackage{multicol}
\usepackage{calc}
\usepackage{ifthen}
\usepackage[landscape]{geometry}
\usepackage{hyperref}
\usepackage{float}

\usepackage{tikz}
\usepackage{amsmath}
\usetikzlibrary{arrows}
\usepackage{float}
\usetikzlibrary{shapes}
\usetikzlibrary{intersections}
\usepackage{circuitikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.13}
\usepackage{graphicx}

\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
            \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}

% This sets page margins to .5 inch if using letter paper, and to 1cm
% if using A4 paper. (This probably isn't strictly necessary.)
% If using another size paper, use default 1cm margins.
\ifthenelse{\lengthtest { \paperwidth = 11in}}
	{ \geometry{top=.5in,left=.5in,right=.5in,bottom=.5in} }
	{\ifthenelse{ \lengthtest{ \paperwidth = 297mm}}
		{\geometry{top=1cm,left=1cm,right=1cm,bottom=1cm} }
		{\geometry{top=1cm,left=1cm,right=1cm,bottom=1cm} }
	}

% Turn off header and footer
\pagestyle{empty}
 

% Redefine section commands to use less space
\makeatletter
\renewcommand{\section}{\@startsection{section}{1}{0mm}%
                                {-1ex plus -.5ex minus -.2ex}%
                                {0.5ex plus .2ex}%x
                                {\normalfont\large\bfseries}}
\renewcommand{\subsection}{\@startsection{subsection}{2}{0mm}%
                                {-1explus -.5ex minus -.2ex}%
                                {0.5ex plus .2ex}%
                                {\normalfont\normalsize\bfseries}}
\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{0mm}%
                                {-1ex plus -.5ex minus -.2ex}%
                                {1ex plus .2ex}%
                                {\normalfont\small\bfseries}}
\makeatother

% Define BibTeX command
\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}

% Don't print section numbers
\setcounter{secnumdepth}{0}


\setlength{\parindent}{0pt}
\setlength{\parskip}{0pt plus 0.5ex}


% -----------------------------------------------------------------------

\begin{document}

\raggedright
\footnotesize
\begin{multicols}{2}

% multicol parameters
% These lengths are set only within the two main columns
%\setlength{\columnseprule}{0.25pt}
\setlength{\premulticols}{1pt}
\setlength{\postmulticols}{1pt}
\setlength{\multicolsep}{1pt}
\setlength{\columnsep}{2pt}

\section{Data Conversion Chain | 20-02-2017}

\begin{figure}[H]
    \begin{center}
        \tikzset{font={\fontsize{8pt}{12}\selectfont}}
        \begin{circuitikz}[x=0.021\linewidth,y=0.021\linewidth]

        \draw[name path=chain]
           (0,0) node[above]{$V_{in}$} to[short,o-] ++(0.2, 0)
           to[lowpass,->] ++(6,0)
           to[twoport,t=S\&H] ++(6,0)
           to[adc] ++(6,0)
           to[dsp] ++(6,0)
           to[dac] ++(6,0)
           to[lowpass] ++(6,0)
           to[short,-o] ++(0.2,0) node[above]{$V_{out}$};

        \path[name path=labels]
           (0,-10) -- ++(3.2, 0) node[draw,shape=circle]{5}
           -- ++(6,0) node[draw,shape=circle]{4}
           -- ++(6,0) node[draw,shape=circle]{3}
           -- ++(6,0) node[draw,shape=circle]{1}
           -- ++(6,0) node[draw,shape=circle]{2}
           -- ++(6,0) node[draw,shape=circle]{6}
           -- ++(6,0);

        \draw[name path=sndr]
        (36.4,-0.5) to[short] ++(0, -0.5) to[short] ++(3, 0) to[short]
        ++(0,-4) node[draw,below]{SNDR} ++(0, -3) node[align=center]{signal to noise \\ and distortion ratio};

        \draw[name path=cd,dashed] (9.2,-6) node[above,rotate=90]{continuous} node[below,rotate=90]{discrete}
        -- (9.2,6) node{};

        \draw[name path=ad,dashed] (15.2,-6) node[above,rotate=90]{analog} node[below,rotate=90]{digital}
        -- (15.2,6) node{};

        \draw[name path=da,dashed] (27.2,-6) node[above,rotate=90]{digital} node[below,rotate=90]{analog}
        -- (27.2,6) node{};

        \draw[name path=dc,dashed] (33.2,-6) node[above,rotate=90]{discrete} node[below,rotate=90]{continuous}
        -- (33.2,6) node{};

        \end{circuitikz}
    \end{center}
    \caption{A typical signal chain}
    \label{fig:chain}
\end{figure}

\subsubsection[chain1DSP]{\circled{1} DSP}
The equivalent ouput voltage can be expressed with \ref{eq:eq_vtg}. It's maximum can be described with \ref{eq:eq_vtg_max}
\begin{equation}
    V_{eq} = V_{ref} \Big(\sum^N_{i=1}b_i 2^{-i}\Big)
    \label{eq:eq_vtg}
\end{equation}
\begin{equation}
    V_{eq} = V_{ref}\Big(1 - 2^{-N}\Big)
    \label{eq:eq_vtg_max}
\end{equation}

This is a representation in UINT. In most realworld impelemntations INT using 2's complement is required. Sometimes if there is peak currents, Gray-Code is to be used to minimize peak currents!

The quantizer-error is defined with equation \ref{eq:quantizer_err}.

\begin{equation}
    V_{e} = V_{in} - V_{eq}
    \label{eq:quantizer_err}
\end{equation}

Since the quantizer error has the probability density function of white noise\footnote{White noise means that the noise has the same amplitude for every frequency.}, it can be depicted with the function seen in \ref{fig:prob_dens_func_quantizer}.

\begin{figure}[H]
    \centering
    \begin{tikzpicture}[declare function={unipdf(\x,\xl,\xu)= (\x>\xl)*(\x<\xu)*1/(\xu-\xl);},x=0.021\linewidth,y=0.021\linewidth]
        \begin{axis}[
            samples=100,
            const plot mark mid,
            scaled ticks = false,
            ymin=0,ymax=0.5,
            xmin=-3,xmax=3,
            xtick={-2,0,2},
            xticklabels={-$\frac{LSB}{2}$,0,$\frac{LSB}{2}$},
            xlabel={$V_e$},
            ytick={0.25},
            yticklabels={$\frac{1}{LSB}$},
            ylabel={$\rho(V_e)$}]
            \addplot [very thick, orange] {unipdf(x,-2,2)};
        \end{axis}
    \end{tikzpicture}
    \caption{Probability density function of the quatizer error}
    \label{fig:prob_dens_func_quantizer}
\end{figure}

The white noise is assumed because the digital signal is a sequence of pulses. If this is fouriertransformed a constant spectral density is received.

\begin{figure}[H]
    \centering
    \fbox{
    \begin{minipage}{0.5\columnwidth}
        \centering
        \fbox{\begin{tikzpicture}[declare function={unipdf(\x,\xl,\xu)= (\x>\xl)*(\x<\xu)*1/(\xu-\xl);}]
            \begin{axis}[
                samples=100,
                const plot mark mid,
                scaled ticks = false,
                ymin=0,ymax=0.5,
                xmin=-3,xmax=3,
                xtick={0},
                ytick={0}]
                \addplot [very thick, orange] {unipdf(x,-5,5)};
            \end{axis}
        \end{tikzpicture}}
        \caption{$dt=0.1$}
        \label{fig:prob1_6_2}
    \end{minipage}%
    }
    \fbox{
    \begin{minipage}{0.5\columnwidth}
        \centering
        \begin{tikzpicture}[declare function={unipdf(\x,\xl,\xu)= (\x>\xl)*(\x<\xu)*1/(\xu-\xl);},scale=0.8]
            \begin{axis}[
                samples=100,
                const plot mark mid,
                scaled ticks = false,
                ymin=0,ymax=0.5,
                xmin=-3,xmax=3,
                xtick={-2,2},
                xticklabels={-$\frac{LSB}{2}$,$\frac{LSB}{2}$}],
                ytick={0.25},
                yticklabels={$\frac{1}{LSB}$}]
                \addplot [very thick, orange] {unipdf(x,-2,2)};
            \end{axis}
        \end{tikzpicture}
        \caption{$dt =$}
        \label{fig:prob1_6_1}
    \end{minipage}
    }
\end{figure}

\subsubsection[chain2DA]{\circled{2} D/A}
\subsubsection[chain3AD]{\circled{3} A/D}
\subsubsection[chain4SH]{\circled{4} S\&H}
\subsubsection[chain56LP]{\circled{5}\circled{6} LP}
\par
\vspace*{\fill}
\par
\rule{0.3\linewidth}{0.25pt}
\scriptsize

Copyright \copyright\ 2017 Noah Huesser

\end{multicols}
\end{document}
